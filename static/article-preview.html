<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Genje News Article</title>
  
  <!-- This file is used as a template for article previews -->
  <!-- It will be served statically and populated with article data -->
  
  <!-- Basic Meta Tags - These will be replaced dynamically -->
  <meta name="description" content="Read this interesting article on Genje News">
  
  <!-- Open Graph / Facebook - These will be replaced dynamically -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="">
  <meta property="og:title" content="Genje News Article">
  <meta property="og:description" content="Read this interesting article on Genje News">
  <meta property="og:image" content="">
  <meta property="og:site_name" content="Genje News">
  
  <!-- Twitter - These will be replaced dynamically -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@genjenews">
  <meta name="twitter:title" content="Genje News Article">
  <meta name="twitter:description" content="Read this interesting article on Genje News">
  <meta name="twitter:image" content="">
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }
    h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    .meta {
      color: #666;
      margin-bottom: 2rem;
    }
    .summary {
      font-size: 1.2rem;
      font-weight: 500;
      margin-bottom: 2rem;
      padding: 1rem;
      background-color: #f5f5f5;
      border-radius: 8px;
    }
    .content {
      margin-top: 2rem;
    }
    .loading {
      text-align: center;
      padding: 2rem;
    }
    .loading-spinner {
      display: inline-block;
      width: 50px;
      height: 50px;
      border: 5px solid rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      border-top-color: #3498db;
      animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <header>
    <h1 id="article-title">Loading Article...</h1>
    <div class="meta" id="article-meta">
      <span id="article-author">Loading author...</span> â€¢ 
      <span id="article-date">Loading date...</span>
    </div>
  </header>
  
  <img id="article-image" src="https://picsum.photos/1200/630" alt="Article image">
  
  <div class="summary" id="article-summary">
    Loading article summary...
  </div>
  
  <div class="loading">
    <div class="loading-spinner"></div>
    <p>Loading article content...</p>
    <p>You will be redirected to the full article shortly.</p>
  </div>
  
  <script>
    // Get the article ID from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const articleId = urlParams.get('id') || '1';
    const articleUrl = `/article/${articleId}`;
    
    // Update the meta tags with the article ID
    document.querySelector('meta[property="og:url"]').setAttribute('content', `${window.location.origin}${articleUrl}`);
    document.querySelector('meta[property="og:image"]').setAttribute('content', `https://picsum.photos/seed/${articleId}/1200/630`);
    document.querySelector('meta[name="twitter:image"]').setAttribute('content', `https://picsum.photos/seed/${articleId}/1200/630`);
    
    // Function to update the page with article data
    async function loadArticleData() {
      try {
        // Try to fetch article data from the API
        const response = await fetch(`/api/articles/${articleId}`);
        
        if (response.ok) {
          const article = await response.json();
          
          // Update the page with article data
          document.title = article.title || "Genje News Article";
          document.getElementById('article-title').textContent = article.title || "Genje News Article";
          document.getElementById('article-author').textContent = article.author ? `By ${article.author}` : "By Genje News";
          
          if (article.published_at) {
            const date = new Date(article.published_at);
            document.getElementById('article-date').textContent = date.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric'
            });
          }
          
          if (article.image_url) {
            document.getElementById('article-image').src = article.image_url;
            document.querySelector('meta[property="og:image"]').setAttribute('content', article.image_url);
            document.querySelector('meta[name="twitter:image"]').setAttribute('content', article.image_url);
          }
          
          if (article.summary) {
            document.getElementById('article-summary').textContent = article.summary;
            document.querySelector('meta[name="description"]').setAttribute('content', article.summary);
            document.querySelector('meta[property="og:description"]').setAttribute('content', article.summary);
            document.querySelector('meta[name="twitter:description"]').setAttribute('content', article.summary);
          }
          
          // Update meta tags
          document.querySelector('meta[property="og:title"]').setAttribute('content', article.title || "Genje News Article");
          document.querySelector('meta[name="twitter:title"]').setAttribute('content', article.title || "Genje News Article");
        }
      } catch (error) {
        console.error('Error loading article data:', error);
      }
      
      // Redirect to the actual article page after a short delay
      setTimeout(() => {
        window.location.href = articleUrl;
      }, 1500);
    }
    
    // Load article data when the page loads
    loadArticleData();
  </script>
</body>
</html>